<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Torus Rendering</title>
  <style>
    body {
      background-color: black;  /* Set the background to black */
      color: white;
      text-align: center;
      margin: 0;
    }
    canvas {
      display: block;
      margin: auto;
      background-color: black;  /* Black background for the canvas */
    }
  </style>
</head>
<body>
  <h1>3D Torus Rotation</h1>
  <canvas id="canvas" width="500" height="500"></canvas>
  
  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;

    const R1 = 100;  // Radius of the torus tube
    const R2 = 200;  // Radius of the torus ring
    const K1 = 150;  // Projection scale
    const K2 = 5;

    const thetaSpacing = 0.07;
    const phiSpacing = 0.02;

    function renderTorus(A, B) {
      ctx.clearRect(0, 0, width, height);  // Clear the canvas
      const cosA = Math.cos(A), sinA = Math.sin(A);
      const cosB = Math.cos(B), sinB = Math.sin(B);

      for (let theta = 0; theta < 2 * Math.PI; theta += thetaSpacing) {
        const cosTheta = Math.cos(theta), sinTheta = Math.sin(theta);

        for (let phi = 0; phi < 2 * Math.PI; phi += phiSpacing) {
          const cosPhi = Math.cos(phi), sinPhi = Math.sin(phi);

          const circleX = R2 + R1 * cosTheta;
          const circleY = R1 * sinTheta;

          const x = circleX * (cosB * cosPhi + sinA * sinB * sinPhi) - circleY * cosA * sinB;
          const y = circleX * (sinB * cosPhi - sinA * cosB * sinPhi) + circleY * cosA * cosB;
          const z = K2 + cosA * circleX * sinPhi + circleY * sinA;
          const ooz = 1 / z;

          const xp = (width / 2 + K1 * ooz * x);
          const yp = (height / 2 - K1 * ooz * y);

          ctx.fillStyle = 'white';
          ctx.fillRect(xp, yp, 2, 2);  // Draw the pixel
        }
      }
    }

    let A = 0, B = 0;
    function animate() {
      A += 0.04;  // Increment angle A
      B += 0.03;  // Increment angle B
      renderTorus(A, B);
      requestAnimationFrame(animate);
    }

    animate();  // Start the animation loop
  </script>
</body>
</html>
